<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">

    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>ReadFunctions &mdash; infragit 1a documentation</title>


    <link href="../_static/css/theme.css" rel="stylesheet" type="text/css"/>
    <link href="../_static/pygments.css" rel="stylesheet" type="text/css"/>
    <link href="../genindex.html" rel="index" title="Index"/>
    <link href="../search.html" rel="search" title="Search"/>


    <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">


<div class="wy-grid-for-nav">


    <nav class="wy-nav-side" data-toggle="wy-nav-shift">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">


                <a class="icon icon-home" href="../index.html"> infragit


                </a>


                <div class="version">
                    0.1.0
                </div>


                <div role="search">
                    <form action="../search.html" class="wy-form" id="rtd-search-form" method="get">
                        <input name="q" placeholder="Search docs" type="text"/>
                        <input name="check_keywords" type="hidden" value="yes"/>
                        <input name="area" type="hidden" value="default"/>
                    </form>
                </div>


            </div>

            <div aria-label="main navigation" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">


                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../IOFactory.html">IO Factory</a></li>
                    <li class="toctree-l1"><a class="reference internal" href="../Datasets/Datasets.html">Data set
                        classes</a></li>
                    <li class="toctree-l1"><a class="reference internal" href="../Properties/BaseProperty.html">Properties</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal"
                                              href="../Factories/Factories.html">Factories</a></li>
                    <li class="toctree-l1"><a class="reference internal" href="../LevelSets/LevelSets.html">Level Set
                        functions and factory</a></li>
                    <li class="toctree-l1"><a class="reference internal" href="../Utils/EigenFactory.html">Eigen Factory
                        Documentation</a></li>
                    <li class="toctree-l1"><a class="reference internal" href="../Utils/Utils.html">General
                        Utilities</a></li>
                    <li class="toctree-l1"><a class="reference internal" href="../Visualizations/Visualization.html">Visualization
                        Classes</a></li>
                </ul>


            </div>
        </div>
    </nav>

    <section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">


        <nav aria-label="top navigation" class="wy-nav-top">

            <i class="fa fa-bars" data-toggle="wy-nav-top"></i>
            <a href="../index.html">infragit</a>

        </nav>


        <div class="wy-nav-content">

            <div class="rst-content">


                <div aria-label="breadcrumbs navigation" role="navigation">

                    <ul class="wy-breadcrumbs">

                        <li><a href="../index.html">Docs</a> &raquo;</li>

                        <li><a href="index.html">Module code</a> &raquo;</li>

                        <li>ReadFunctions</li>


                        <li class="wy-breadcrumbs-aside">

                        </li>

                    </ul>


                    <hr/>
                </div>
                <div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
                    <div itemprop="articleBody">

                        <h1>Source code for ReadFunctions</h1>
                        <div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Reading Functions</span>
<span class="sd">=================</span>

<span class="sd">Specific functions for file reading. Called from the IOFactory</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span
                                class="p">[</span><span class="mi">0</span><span class="p">]</span> <span
                                class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">cPickle</span> <span class="k">as</span> <span
                                class="nn">_pickle</span>
<span class="k">else</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">_pickle</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="c1"># from laspy.file import file</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">ColorFactory</span> <span class="k">import</span> <span class="n">ColorFactory</span>
<span class="kn">from</span> <span class="nn">PointSet</span> <span class="k">import</span> <span
                                class="n">PointSet</span>
<span class="kn">from</span> <span class="nn">RasterData</span> <span class="k">import</span> <span
                                class="n">RasterData</span>
<span class="kn">from</span> <span class="nn">TransformationMatrixProperty</span> <span class="k">import</span> <span
                                class="n">TransformationMatrixProperty</span>


<div class="viewcode-block" id="ReadPts"><a class="viewcode-back"
                                            href="../IOFactory.html#ReadFunctions.ReadPts">[docs]</a><span
        class="k">def</span> <span class="nf">ReadPts</span><span class="p">(</span><span class="n">filename</span><span
        class="p">,</span> <span class="n">pointsetlist</span><span class="o">=</span><span class="kc">None</span><span
        class="p">,</span> <span class="n">colorslist</span><span class="o">=</span><span class="kc">None</span><span
        class="p">,</span> <span class="n">merge</span><span class="o">=</span><span class="kc">True</span><span
        class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reading points from .pts file. If the pts file holds more than one PointSet merge into one PointSet (unless told</span>
<span class="sd">    otherwise).</span>

<span class="sd">    :param fileName: name of .pts file</span>

<span class="sd">    **Optionals**</span>
<span class="sd">    :param pointsetlist: placeholder for created PointSet objects</span>
<span class="sd">    :param colorslist: placeholder for ColorProperty for PointSet object(s)</span>

<span class="sd">    :param merge: merge points in file into one PointSet or not. Default: True.</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :type pointsetlist: list</span>
<span class="sd">    :type colorslist: list</span>
<span class="sd">    :type merge: bool</span>

<span class="sd">    :return: The created PointSet or the list of the PointSets</span>

<span class="sd">    :rtype: PointSet or list</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">colorProp</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Opening file and reading all lines from it</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span
            class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span
            class="k">as</span> <span class="n">fin</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">fin</span><span class="o">.</span><span
            class="n">readlines</span><span class="p">()</span>
        <span class="n">batch_start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">batch_size</span> <span class="o">=</span> <span class="nb">int</span><span
            class="p">(</span><span class="n">lines</span><span class="p">[</span><span
            class="n">batch_start</span><span class="p">])</span>
        <span class="n">batch_end</span> <span class="o">=</span> <span class="n">batch_start</span> <span
            class="o">+</span> <span class="n">batch_size</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">batches</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">while</span> <span class="n">batch_size</span> <span class="o">&gt;</span> <span
            class="mi">0</span><span class="p">:</span>

            <span class="n">batch_i</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span
            class="n">batch_start</span> <span class="o">+</span> <span class="mi">1</span><span
            class="p">:</span> <span class="n">batch_end</span><span class="p">]</span>
            <span class="n">batches</span><span class="o">.</span><span class="n">append</span><span
            class="p">(</span><span class="n">batch_i</span><span class="p">)</span>

            <span class="n">batch_start</span> <span class="o">=</span> <span class="n">batch_end</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">batch_size</span> <span class="o">=</span> <span class="nb">int</span><span
            class="p">(</span><span class="n">lines</span><span class="p">[</span><span
            class="n">batch_start</span><span class="p">])</span>
                <span class="n">batch_end</span> <span class="o">=</span> <span class="n">batch_start</span> <span
            class="o">+</span> <span class="n">batch_size</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">batch_size</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">pts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">intensity</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span
            class="n">batches</span><span class="p">:</span>
        <span class="n">pt_batch</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span
            class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span
            class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">__splitPtsString</span><span
            class="p">,</span> <span class="n">batch</span><span class="p">))))</span>
        <span class="k">if</span> <span class="n">merge</span><span class="p">:</span>
            <span class="n">pts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
            class="n">pt_batch</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">3</span><span
            class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">pointsetlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
            class="n">PointSet</span><span class="p">(</span><span class="n">pt_batch</span><span
            class="p">,</span> <span class="n">path</span> <span class="o">=</span> <span class="n">filename</span><span
            class="p">))</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No pointset list has been assigned.&quot;</span><span
            class="p">)</span>

        <span class="n">dimension</span> <span class="o">=</span> <span class="n">pt_batch</span><span
            class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span
            class="p">]</span>

        <span class="k">if</span> <span class="n">dimension</span> <span class="o">==</span> <span
            class="mi">7</span><span class="p">:</span>
            <span class="c1"># the data includes RGB</span>
            <span class="n">colors_batch</span> <span class="o">=</span> <span class="n">pt_batch</span><span class="p">[:,</span> <span
            class="mi">4</span><span class="p">:]</span>

            <span class="k">if</span> <span class="n">merge</span><span class="p">:</span>
                <span class="n">colors</span><span class="o">.</span><span class="n">append</span><span
            class="p">(</span><span class="n">colors_batch</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">colorslist</span><span class="o">.</span><span class="n">append</span><span
            class="p">(</span><span class="n">ColorFactory</span><span class="o">.</span><span
            class="n">assignColor</span><span class="p">(</span><span class="n">pointsetlist</span><span
            class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span
            class="n">colors_batch</span><span class="p">))</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No colors list has been assigned.&quot;</span><span
            class="p">)</span>

        <span class="k">if</span> <span class="n">dimension</span> <span class="o">&gt;=</span> <span
            class="mi">4</span><span class="p">:</span>
            <span class="c1"># the data includes intensity</span>
            <span class="n">intensity_batch</span> <span class="o">=</span> <span class="n">pt_batch</span><span
            class="p">[:,</span> <span class="mi">3</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">merge</span><span class="p">:</span>
                <span class="n">intensity</span><span class="o">.</span><span class="n">append</span><span
            class="p">(</span><span class="n">intensity_batch</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">pointsetlist</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span
            class="p">]</span><span class="o">.</span><span class="n">AddData2Fields</span><span class="p">(</span><span
            class="n">intensity_batch</span><span class="p">,</span> <span class="n">field</span> <span
            class="o">=</span> <span class="s1">&#39;intensity&#39;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No pointset list has been assigned.&quot;</span><span
            class="p">)</span>

    <span class="k">if</span> <span class="n">merge</span><span class="p">:</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">PointSet</span><span
            class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span
            class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span
            class="p">(</span><span class="n">pts</span><span class="p">)),</span> <span class="n">path</span> <span
            class="o">=</span> <span class="n">filename</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span
            class="n">intensity</span><span class="p">)</span> <span class="o">==</span> <span
            class="nb">len</span><span class="p">(</span><span class="n">pts</span><span class="p">):</span>
            <span class="n">points</span><span class="o">.</span><span class="n">AddData2Fields</span><span
            class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span
            class="p">(</span><span class="n">intensity</span><span class="p">)[</span><span class="mi">0</span><span
            class="p">],</span> <span class="n">field</span> <span class="o">=</span> <span class="s1">&#39;intensity&#39;</span><span
            class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span
            class="p">(</span><span class="s1">&#39;Some points don&#39;&#39;t have intensity values. None was assigned to PointSet&#39;</span><span
            class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span
            class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span
            class="n">pts</span><span class="p">):</span>
            <span class="n">colorslist</span> <span class="o">=</span> <span class="n">ColorFactory</span><span
            class="o">.</span><span class="n">assignColor</span><span class="p">(</span><span
            class="n">points</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span
            class="n">array</span><span class="p">(</span><span class="n">colors</span><span class="p">)[</span><span
            class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span
            class="p">(</span><span class="s1">&#39;Some points don&#39;&#39;t have color values. No color property created&#39;</span><span
            class="p">)</span>

        <span class="k">return</span> <span class="n">points</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pointsetlist</span></div>


<div class="viewcode-block" id="ReadPtx"><a class="viewcode-back"
                                            href="../IOFactory.html#ReadFunctions.ReadPtx">[docs]</a><span
        class="k">def</span> <span class="nf">ReadPtx</span><span class="p">(</span><span class="n">filename</span><span
        class="p">,</span> <span class="n">pointsetlist</span><span class="o">=</span><span class="nb">list</span><span
        class="p">(),</span> <span class="n">colorslist</span><span class="o">=</span><span class="nb">list</span><span
        class="p">(),</span> <span class="n">trasformationMatrices</span><span class="o">=</span><span
        class="nb">list</span><span class="p">(),</span>
            <span class="n">remove_empty</span><span class="o">=</span><span class="kc">True</span><span
            class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads .ptx file, created by Leica Cyclone</span>

<span class="sd">    File is build according to:</span>
<span class="sd">    https://w3.leica-geosystems.com/kb/?guid=5532D590-114C-43CD-A55F-FE79E5937CB2</span>

<span class="sd">    :param filename: path to file + file</span>

<span class="sd">    *Optionals*</span>

<span class="sd">    :param pointsetlist: list that holds all the uploaded PointSet</span>
<span class="sd">    :param colorslist: list that holds all the color properties that relate to the PointSet</span>
<span class="sd">    :param transformationMatrices: list that holds all the transformation properties that relate to the PointSet</span>
<span class="sd">    :param removeEmpty: flag to remove or leave empty points. Default: True</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :type pointsetlist: list</span>
<span class="sd">    :type colorslist: list of ColorProperty</span>
<span class="sd">    :type trasnformationMatrices: list of TransformationMatrixProperty</span>
<span class="sd">    :type removeEmpty: bool</span>

<span class="sd">    :return: pointSet list</span>

<span class="sd">    :rtype: list</span>

<span class="sd">    .. warning:: Doesn&#39;t read the transformation matrices.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Open file and read lines from it</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span
            class="p">)</span> <span class="k">as</span> <span class="n">fin</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">fin</span><span class="o">.</span><span
            class="n">readlines</span><span class="p">()</span>

        <span class="c1"># window size of the scanned points</span>
        <span class="n">batch_start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">num_cols</span> <span class="o">=</span> <span class="nb">int</span><span
            class="p">(</span><span class="n">lines</span><span class="p">[</span><span
            class="n">batch_start</span><span class="p">])</span>
        <span class="n">num_rows</span> <span class="o">=</span> <span class="nb">int</span><span
            class="p">(</span><span class="n">lines</span><span class="p">[</span><span
            class="n">batch_start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>

        <span class="c1"># number of points in the first batch</span>
        <span class="n">batch_size</span> <span class="o">=</span> <span class="n">num_cols</span> <span
            class="o">*</span> <span class="n">num_rows</span>

        <span class="k">while</span> <span class="n">batch_size</span> <span class="o">&gt;</span> <span
            class="mi">0</span><span class="p">:</span>
            <span class="c1"># read transformation matrix lines of the current point cloud</span>
            <span class="n">transformationMatrix</span> <span class="o">=</span> <span class="n">np</span><span
            class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="p">[</span><span class="n">__splitPtsString</span><span class="p">(</span><span class="n">line</span><span
            class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span
            class="n">lines</span><span class="p">[</span><span class="n">batch_start</span> <span
            class="o">+</span> <span class="mi">6</span><span class="p">:</span><span class="n">batch_start</span> <span
            class="o">+</span> <span class="mi">10</span><span class="p">]])</span>
            <span class="c1"># read current point cloud</span>
            <span class="n">pt_batch</span> <span class="o">=</span> <span class="n">np</span><span
            class="o">.</span><span class="n">array</span><span class="p">([</span><span
            class="n">__splitPtsString</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span
            class="k">for</span> <span class="n">line</span>
                                 <span class="ow">in</span> <span class="n">lines</span><span class="p">[</span><span
            class="n">batch_start</span> <span class="o">+</span> <span class="mi">10</span><span
            class="p">:</span> <span class="n">batch_size</span> <span class="o">+</span> <span
            class="n">batch_start</span><span class="p">]])</span>

            <span class="c1"># if remove_empty is True - delete all empty points from cloud:</span>
            <span class="k">if</span> <span class="n">remove_empty</span><span class="p">:</span>
                <span class="n">empty_indices</span> <span class="o">=</span> <span class="n">np</span><span
            class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">pt_batch</span><span
            class="p">[:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span
            class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span
            class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span
            class="p">,</span> <span class="mi">0</span><span class="p">]))</span>
                <span class="n">pt_batch</span> <span class="o">=</span> <span class="n">np</span><span
            class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">pt_batch</span><span
            class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span
            class="p">(</span><span class="n">empty_indices</span><span class="p">),</span> <span class="n">axis</span> <span
            class="o">=</span> <span class="mi">0</span><span class="p">)</span>

            <span class="n">pointsetlist</span><span class="o">.</span><span class="n">append</span><span
            class="p">(</span><span class="n">PointSet</span><span class="p">(</span><span
            class="n">pt_batch</span><span class="p">,</span> <span class="n">path</span> <span class="o">=</span> <span
            class="n">filename</span><span class="p">,</span> <span class="n">intensity</span> <span class="o">=</span> <span
            class="n">pt_batch</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]))</span>
            <span class="n">trasformationMatrices</span><span class="o">.</span><span class="n">append</span><span
            class="p">(</span><span class="n">TransformationMatrixProperty</span><span class="p">(</span><span
            class="n">pointsetlist</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span
            class="p">],</span>
                                                                      <span class="n">transformationMatrix</span><span
            class="o">=</span><span class="n">transformationMatrix</span><span class="p">))</span>
            <span class="n">dimension</span> <span class="o">=</span> <span class="n">pt_batch</span><span
            class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span
            class="p">]</span>
            <span class="k">if</span> <span class="n">dimension</span> <span class="o">==</span> <span
            class="mi">7</span><span class="p">:</span>
                <span class="c1"># the data includes RGB</span>
                <span class="n">colors_batch</span> <span class="o">=</span> <span class="n">pt_batch</span><span
            class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">colorslist</span><span class="o">.</span><span class="n">append</span><span
            class="p">(</span><span class="n">ColorFactory</span><span class="o">.</span><span
            class="n">assignColor</span><span class="p">(</span><span class="n">pointsetlist</span><span
            class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span
            class="n">colors_batch</span><span class="p">))</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No colors list has been assigned.&quot;</span><span
            class="p">)</span>

            <span class="c1"># initialize for next batch.</span>
            <span class="n">batch_start</span> <span class="o">+=</span> <span class="n">batch_size</span> <span
            class="o">+</span> <span class="mi">10</span>
            <span class="k">if</span> <span class="n">batch_start</span> <span class="o">&lt;</span> <span class="nb">len</span><span
            class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">-</span> <span
            class="mi">10</span><span class="p">:</span>
                <span class="n">num_cols</span> <span class="o">=</span> <span class="nb">int</span><span
            class="p">(</span><span class="n">lines</span><span class="p">[</span><span
            class="n">batch_start</span><span class="p">])</span>
                <span class="n">num_rows</span> <span class="o">=</span> <span class="nb">int</span><span
            class="p">(</span><span class="n">lines</span><span class="p">[</span><span
            class="n">batch_start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>

                <span class="c1"># number of points in the first batch</span>
                <span class="n">batch_size</span> <span class="o">=</span> <span class="n">num_cols</span> <span
            class="o">*</span> <span class="n">num_rows</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">batch_size</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">return</span> <span class="n">pointsetlist</span></div>


<div class="viewcode-block" id="ReadXYZ"><a class="viewcode-back"
                                            href="../IOFactory.html#ReadFunctions.ReadXYZ">[docs]</a><span
        class="k">def</span> <span class="nf">ReadXYZ</span><span class="p">(</span><span class="n">fileName</span><span
        class="p">,</span> <span class="n">pointsetlist</span><span class="o">=</span><span class="nb">list</span><span
        class="p">(),</span> <span class="n">merge</span><span class="o">=</span><span class="kc">True</span><span
        class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reading points from .xyz file</span>
<span class="sd">    Creates one PointSet objects returned through pointSetList</span>


<span class="sd">    :param fileName: name of .xyz file</span>
<span class="sd">    :param pointsetlist: place holder for created PointSet object</span>

<span class="sd">    :type fileName: str</span>
<span class="sd">    :type pointsetlist: list</span>

<span class="sd">    :return: Number of PointSet objects created</span>

<span class="sd">    :rtype: int</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parametersTypes</span> <span class="o">=</span> <span class="n">np</span><span
            class="o">.</span><span class="n">dtype</span><span class="p">({</span><span
            class="s1">&#39;names&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span
            class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span
            class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span
            class="p">]</span>
                                   <span class="p">,</span> <span class="s1">&#39;formats&#39;</span><span
            class="p">:</span> <span class="p">[</span><span class="s1">&#39;int&#39;</span><span
            class="p">,</span> <span class="s1">&#39;float&#39;</span><span class="p">,</span> <span class="s1">&#39;float&#39;</span><span
            class="p">,</span> <span class="s1">&#39;float&#39;</span><span class="p">]})</span>

    <span class="c1">#         parametersTypes = np.dtype({&#39;names&#39;:[&#39;x&#39;, &#39;y&#39;, &#39;z&#39;]</span>
    <span class="c1">#                                , &#39;formats&#39;:[&#39;float&#39;, &#39;float&#39;, &#39;float&#39;]})</span>

    <span class="n">imported_array</span> <span class="o">=</span> <span class="n">np</span><span
            class="o">.</span><span class="n">genfromtxt</span><span class="p">(</span><span
            class="n">fileName</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span
            class="n">parametersTypes</span><span class="p">,</span> <span class="n">filling_values</span><span
            class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span
            class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span
            class="mi">0</span><span class="p">))</span>

    <span class="n">xyz</span> <span class="o">=</span> <span class="n">imported_array</span><span
            class="p">[[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span
            class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span
            class="p">]]</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span
            class="nb">float</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span
            class="p">(</span><span class="nb">len</span><span class="p">(</span><span
            class="n">imported_array</span><span class="p">),</span> <span class="o">-</span><span
            class="mi">1</span><span class="p">)</span>

    <span class="n">pointSet</span> <span class="o">=</span> <span class="n">PointSet</span><span
            class="p">(</span><span class="n">xyz</span><span class="p">)</span>
    <span class="n">pointSet</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span
            class="n">fileName</span>
    <span class="n">pointsetlist</span><span class="o">.</span><span class="n">append</span><span
            class="p">(</span><span class="n">pointSet</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">merge</span><span class="p">:</span>
        <span class="n">pointsetlist</span> <span class="o">=</span> <span class="n">np</span><span
            class="o">.</span><span class="n">array</span><span class="p">(</span><span
            class="n">pointsetlist</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">pointsetlist</span><span
            class="p">)</span></div>


<div class="viewcode-block" id="ReadLAS"><a class="viewcode-back"
                                            href="../IOFactory.html#ReadFunctions.ReadLAS">[docs]</a><span
        class="k">def</span> <span class="nf">ReadLAS</span><span class="p">(</span><span class="n">filename</span><span
        class="p">,</span> <span class="n">classification</span><span class="o">=</span><span
        class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads LAS or LAZ files</span>

<span class="sd">    :param filename: path to LAS or LAZ</span>
<span class="sd">    :param classification: return a SegmentationProperty according to the LAS file or not (default: False)</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :type classification: bool</span>

<span class="sd">    :return: pointcloud, (classification as received from LAS file)</span>
<span class="sd">    :rtype: PointSet, SegmentationProperty</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">laspy</span> <span class="k">import</span> <span class="n">file</span> <span
            class="k">as</span> <span class="n">lasfile</span>
    <span class="kn">from</span> <span class="nn">SegmentationProperty</span> <span class="k">import</span> <span
            class="n">SegmentationProperty</span>

    <span class="k">with</span> <span class="n">lasfile</span><span class="o">.</span><span class="n">File</span><span
            class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span
            class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span
            class="k">as</span> <span class="n">infile</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span
            class="n">X</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span
            class="n">Y</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span
            class="n">Z</span>

        <span class="n">pcl</span> <span class="o">=</span> <span class="n">PointSet</span><span class="p">(</span><span
            class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span
            class="n">x</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">],</span> <span
            class="n">y</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">],</span> <span
            class="n">z</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">])),</span> <span
            class="n">path</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span
            class="n">intensity</span><span class="o">=</span><span class="n">infile</span><span class="o">.</span><span
            class="n">Intensity</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">classification</span><span class="p">:</span>
            <span class="n">segmentation</span> <span class="o">=</span> <span
            class="n">SegmentationProperty</span><span class="p">(</span><span class="n">pcl</span><span
            class="p">,</span> <span class="n">infile</span><span class="o">.</span><span
            class="n">Classification</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">pcl</span><span class="p">,</span> <span class="n">segmentation</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pcl</span></div>


<div class="viewcode-block" id="loadPickle_dataset"><a class="viewcode-back"
                                                       href="../IOFactory.html#ReadFunctions.loadPickle_dataset">[docs]</a><span
        class="k">def</span> <span class="nf">loadPickle_dataset</span><span class="p">(</span><span
        class="n">filename</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span
        class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads a pickle file of a dataset.</span>

<span class="sd">    The user can specify which type of data it is .</span>

<span class="sd">    :param filename: file and path to file</span>
<span class="sd">    :param type: the type of class (BallTreePointSet, PointSet, PointSubSet, etc.)</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :type type: class</span>

<span class="sd">    :return: BaseData</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">IO_Tools</span>
    <span class="n">filename</span><span class="p">,</span> <span class="n">extension</span> <span
            class="o">=</span> <span class="n">IO_Tools</span><span class="o">.</span><span
            class="n">CreateFilename</span><span class="p">(</span><span class="n">filename</span><span
            class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">type</span> <span class="ow">is</span> <span class="ow">not</span> <span
            class="kc">None</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="nb">type</span><span class="p">()</span>
        <span class="n">dataset</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="n">_pickle</span><span
            class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span
            class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span
            class="p">)</span></div>

<div class="viewcode-block" id="read2_PointSetOpen3D"><a class="viewcode-back"
                                                         href="../IOFactory.html#ReadFunctions.read2_PointSetOpen3D">[docs]</a><span
        class="k">def</span> <span class="nf">read2_PointSetOpen3D</span><span class="p">(</span><span class="n">file_path</span><span
        class="p">,</span> <span class="n">voxel_size</span><span class="o">=-</span><span class="mi">1</span><span
        class="p">,</span> <span class="n">print_bb</span><span class="o">=</span><span class="kc">False</span><span
        class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Reads a file into a PointSetOpen3D object</span>

<span class="sd">    :param file_path: Path of pointcloud file</span>
<span class="sd">    :param voxel_size: If &gt;0 then decimate point cloud with this parameter as min points distance</span>
<span class="sd">    :param print_bb: Print boundarybox values</span>

<span class="sd">    :type: str</span>
<span class="sd">    :type: Positive double</span>
<span class="sd">    :type: bool</span>

<span class="sd">    :return: pointsetExtra Object</span>
<span class="sd">    :rtype: PointSetExtra</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span
            class="o">==</span> <span class="s2">&quot;linux&quot;</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">open3d</span> <span class="k">as</span> <span
            class="nn">O3D</span>
        <span class="kn">from</span> <span class="nn">PointSetOpen3D</span> <span class="k">import</span> <span
            class="n">PointSetOpen3D</span>

        <span class="c1"># Read Point Cloud</span>
        <span class="n">input_cloud</span> <span class="o">=</span> <span class="n">O3D</span><span
            class="o">.</span><span class="n">read_point_cloud</span><span class="p">(</span><span
            class="n">file_path</span><span class="p">)</span>

        <span class="n">pointsetExtra</span> <span class="o">=</span> <span class="n">PointSetOpen3D</span><span
            class="p">(</span><span class="n">input_cloud</span><span class="p">)</span>
        <span class="n">pointsetExtra</span><span class="o">.</span><span class="n">DownsampleCloud</span><span
            class="p">(</span><span class="n">voxel_size</span><span class="p">)</span>
        <span class="n">pointsetExtra</span><span class="o">.</span><span class="n">setPath</span><span
            class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pointsetExtra</span></div>


<div class="viewcode-block" id="GetCurvatureFilePath"><a class="viewcode-back"
                                                         href="../IOFactory.html#ReadFunctions.GetCurvatureFilePath">[docs]</a><span
        class="k">def</span> <span class="nf">GetCurvatureFilePath</span><span class="p">(</span><span class="n">folderPath</span><span
        class="p">,</span> <span class="n">dataName</span><span class="p">,</span> <span
        class="n">currentFileIndex</span><span class="p">,</span> <span
        class="n">localNeighborhoodParameters</span><span class="p">,</span> <span
        class="n">decimationRadius</span><span class="p">,</span>
                         <span class="n">testRun</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the curvature files according to path</span>

<span class="sd">    :param folderPath: Path to curvature-files folder</span>
<span class="sd">    :param dataName: name of the new file</span>
<span class="sd">    :param currentFileIndex: indexing for saving (file1.txt, file2.txt, etc)</span>
<span class="sd">    :param localNeighborhoodParameters: dictionary holding the neighborhood parameters (radius and maximum number of neighbors)</span>
<span class="sd">    :param decimationRadius: minimal distance between two points for downsampling .</span>
<span class="sd">    :param testRun: If true then only temporary files will be saved that are cleaned at each run.</span>

<span class="sd">    :TODO: Elia -- please provide better explanation</span>

<span class="sd">    :type folderPath: str</span>
<span class="sd">    :type dataName: str</span>
<span class="sd">    :type currentFileIndex: int</span>
<span class="sd">    :type localNeighborhoodParameters: dict</span>
<span class="sd">    :type decimationRadius: float</span>
<span class="sd">    :type testRun: bool</span>

<span class="sd">    :return: full filename and path for loading (or saving) curvature files</span>

<span class="sd">    :rtype: str</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">testRun</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">localNeighborhoodParameters</span><span
            class="p">[</span><span class="s1">&#39;search_radius&#39;</span><span class="p">]</span>
        <span class="n">nn</span> <span class="o">=</span> <span class="n">localNeighborhoodParameters</span><span
            class="p">[</span><span class="s1">&#39;maxNN&#39;</span><span class="p">]</span>

        <span class="n">curvatureFilePath</span> <span class="o">=</span> <span class="n">folderPath</span> <span
            class="o">+</span> <span class="s1">&#39;Curvature/&#39;</span> <span class="o">+</span> <span class="n">dataName</span> <span
            class="o">+</span> <span class="nb">str</span><span class="p">(</span><span
            class="n">currentFileIndex</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;r&#39;</span> <span
            class="o">+</span> <span class="nb">str</span><span class="p">(</span>
            <span class="n">r</span><span class="p">)</span> <span class="o">+</span> <span
            class="s2">&quot;nn&quot;</span> <span class="o">+</span> <span class="nb">str</span><span
            class="p">(</span><span class="n">nn</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">decimationRadius</span><span class="p">:</span>
            <span class="n">curvatureFilePath</span> <span class="o">+=</span> <span class="s1">&#39;d&#39;</span> <span
            class="o">+</span> <span class="nb">str</span><span class="p">(</span><span
            class="n">decimationRadius</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.txt&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">curvatureFilePath</span> <span class="o">+=</span> <span class="s1">&#39;.txt&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">curvatureFilePath</span> <span class="o">=</span> <span class="n">folderPath</span> <span
            class="o">+</span> <span class="s1">&#39;Curvature/testRun&#39;</span> <span class="o">+</span> <span
            class="nb">str</span><span class="p">(</span><span class="n">currentFileIndex</span><span class="p">)</span> <span
            class="o">+</span> <span class="s1">&#39;.txt&#39;</span>

    <span class="k">return</span> <span class="n">curvatureFilePath</span></div>


<div class="viewcode-block" id="rasterFromAscFile"><a class="viewcode-back"
                                                      href="../IOFactory.html#ReadFunctions.rasterFromAscFile">[docs]</a><span
        class="k">def</span> <span class="nf">rasterFromAscFile</span><span class="p">(</span><span
        class="n">path</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span
        class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads raster from .txt or .asc files</span>

<span class="sd">    :param path: path+filename</span>
<span class="sd">    :param projection:</span>

<span class="sd">    :type path: str</span>

<span class="sd">    :return: a RasterData object</span>

<span class="sd">     :rtype: RasterData</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">sys</span> <span class="k">import</span> <span
            class="n">exc_info</span>
    <span class="kn">from</span> <span class="nn">traceback</span> <span class="k">import</span> <span class="n">print_tb</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">fin</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span
            class="n">path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">filelines</span> <span class="o">=</span> <span class="n">fin</span><span
            class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">fin</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unexpected error: &quot;</span><span
            class="p">,</span> <span class="n">exc_info</span><span class="p">()[</span><span class="mi">0</span><span
            class="p">])</span>
        <span class="n">print_tb</span><span class="p">(</span><span class="n">exc_info</span><span class="p">()[</span><span
            class="mi">2</span><span class="p">])</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="n">ncols</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span
            class="n">int</span><span class="p">(</span><span class="n">filelines</span><span class="p">[</span><span
            class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span
            class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="o">-</span><span
            class="mi">1</span><span class="p">])</span>
    <span class="n">nrows</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span
            class="n">int</span><span class="p">(</span><span class="n">filelines</span><span class="p">[</span><span
            class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span
            class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="o">-</span><span
            class="mi">1</span><span class="p">])</span>
    <span class="n">xllcorner</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span
            class="n">float32</span><span class="p">(</span><span class="n">filelines</span><span
            class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span
            class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="o">-</span><span
            class="mi">1</span><span class="p">])</span>
    <span class="n">yllcorner</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span
            class="n">float32</span><span class="p">(</span><span class="n">filelines</span><span
            class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span
            class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="o">-</span><span
            class="mi">1</span><span class="p">])</span>
    <span class="n">cellsize</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span
            class="n">float32</span><span class="p">(</span><span class="n">filelines</span><span
            class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span
            class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="o">-</span><span
            class="mi">1</span><span class="p">])</span>
    <span class="n">nodata_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span
            class="n">float32</span><span class="p">(</span><span class="n">filelines</span><span
            class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span
            class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="o">-</span><span
            class="mi">1</span><span class="p">])</span>

    <span class="n">line_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span
            class="n">filelines</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span
            class="o">.</span><span class="n">split</span><span class="p">(</span><span
            class="s1">&#39; &#39;</span><span class="p">)[:</span><span class="o">-</span><span
            class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">line_size</span> <span class="o">==</span> <span
            class="n">ncols</span><span class="p">:</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span
            class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span
            class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span
            class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">1</span><span
            class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>

        <span class="n">tmp</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span
            class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span
            class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span
            class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[:</span><span class="o">-</span><span
            class="mi">1</span><span class="p">])</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span
            class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span
            class="nb">map</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span
            class="n">filelines</span><span class="p">[</span><span class="mi">6</span><span class="p">:])))</span>
    <span class="k">return</span> <span class="n">RasterData</span><span class="p">(</span><span
            class="n">data</span><span class="p">,</span> <span class="n">gridSpacing</span><span
            class="o">=</span><span class="n">cellsize</span><span class="p">,</span> <span
            class="n">geoTransform</span><span class="o">=</span><span class="p">(</span><span
            class="n">xllcorner</span><span class="p">,</span> <span class="n">yllcorner</span><span class="p">,</span> <span
            class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">),</span>
                      <span class="n">spatial_reference</span><span class="o">=</span><span
            class="n">projection</span><span class="p">,</span> <span class="n">voidData</span><span
            class="o">=</span><span class="n">nodata_value</span><span class="p">,</span> <span
            class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span></div>

<span class="k">def</span> <span class="nf">__splitPtsString</span><span class="p">(</span><span
                                class="n">line</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracting the points&#39; data (3D coordinates, intensity, color) from a string</span>

<span class="sd">    :param line: A string containing a line from a .pts file</span>

<span class="sd">    :return: all existing Data of a point</span>

<span class="sd">    :rtype: np.array</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tmp</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span
                                class="n">split</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span
                                class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span
                                class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">tmp</span><span
                                class="p">)))</span>
</pre>
                        </div>

                    </div>

                </div>
                <footer>


                    <hr/>

                    <div role="contentinfo">
                        <p>
                            &copy; Copyright 2018, Sagi Students.

                        </p>
                    </div>
                    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a
                        href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a
                        href="https://readthedocs.org">Read the Docs</a>.

                </footer>

            </div>
        </div>

    </section>

</div>


<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT: '../',
        VERSION: '1a',
        LANGUAGE: 'None',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE: true,
        SOURCELINK_SUFFIX: '.txt'
    };
</script>
<script src="../_static/jquery.js" type="text/javascript"></script>
<script src="../_static/underscore.js" type="text/javascript"></script>
<script src="../_static/doctools.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
        type="text/javascript"></script>


<script src="../_static/js/theme.js" type="text/javascript"></script>

<script type="text/javascript">
    jQuery(function () {
        SphinxRtdTheme.Navigation.enable(true);
    });
</script>

</body>
</html>